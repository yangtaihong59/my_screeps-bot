{"code":"export const mountTower = function () {\r\n    // 将拓展签入 Tower 原型\r\n    _.assign(StructureTower.prototype, towerExtension);\r\n};\r\n// 自定义的 Tower 的拓展\r\nconst towerExtension = {\r\n    //工作\r\n    work() {\r\n        if (this.towerattack() == 'ERR_NO_TARGET') {\r\n            this.towerrepair();\r\n        }\r\n        else {\r\n            this.towerattack(1000, 1000);\r\n        }\r\n    },\r\n    //攻击\r\n    towerattack() {\r\n        var closestHostile = this.pos.findClosestByRange(FIND_HOSTILE_CREEPS);\r\n        if (closestHostile) {\r\n            this.attack(closestHostile);\r\n        }\r\n        else {\r\n            return 'ERR_NO_TARGET';\r\n        }\r\n    },\r\n    //维修\r\n    towerrepair(ramparthit, wallhit) {\r\n        var closestDamagedStructure = this.pos.findClosestByRange(FIND_STRUCTURES, {\r\n            filter: (structure) => {\r\n                return structure.hits < structure.hitsMax && structure.structureType != STRUCTURE_RAMPART && structure.structureType != STRUCTURE_WALL;\r\n            }\r\n        });\r\n        if (closestDamagedStructure) {\r\n            this.repair(closestDamagedStructure);\r\n        }\r\n        else {\r\n            return 'ERR_NO_TARGET';\r\n        }\r\n    }\r\n};\r\n//# sourceMappingURL=mount.tower.js.map","references":[],"map":"{\"version\":3,\"file\":\"mount.tower.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/mount/structure/mount.tower.ts\"],\"names\":[],\"mappings\":\"AAEA,MAAM,CAAC,MAAM,UAAU,GAAG;IAEtB,iBAAiB;IACjB,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,SAAS,EAAE,cAAc,CAAC,CAAA;AACtD,CAAC,CAAA;AACD,iBAAiB;AACjB,MAAM,cAAc,GAAG;IACnB,IAAI;IACJ,IAAI;QACA,IAAG,IAAI,CAAC,WAAW,EAAE,IAAI,eAAe,EAAC;YACrC,IAAI,CAAC,WAAW,EAAE,CAAA;SACrB;aAAI;YACD,IAAI,CAAC,WAAW,CAAC,IAAI,EAAC,IAAI,CAAC,CAAA;SAC9B;IACL,CAAC;IACD,IAAI;IACJ,WAAW;QACP,IAAI,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,kBAAkB,CAAC,mBAAmB,CAAC,CAAC;QACtE,IAAG,cAAc,EAAE;YACf,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;SAC/B;aACG;YACA,OAAO,eAAe,CAAA;SACzB;IACL,CAAC;IACD,IAAI;IACJ,WAAW,CAAC,UAAU,EAAC,OAAO;QAC1B,IAAI,uBAAuB,GAAG,IAAI,CAAC,GAAG,CAAC,kBAAkB,CAAC,eAAe,EAAE;YACvE,MAAM,EAAC,CAAC,SAAS,EAAC,EAAE;gBAChB,OAAO,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,OAAO,IAAI,SAAS,CAAC,aAAa,IAAI,iBAAiB,IAAI,SAAS,CAAC,aAAa,IAAG,cAAc,CAAC;YAE1I,CAAC;SACJ,CAAC,CAAC;QACH,IAAG,uBAAuB,EAAE;YACxB,IAAI,CAAC,MAAM,CAAC,uBAAuB,CAAC,CAAC;SACxC;aAAI;YACD,OAAO,eAAe,CAAA;SACzB;IACL,CAAC;CACJ,CAAA\"}"}
